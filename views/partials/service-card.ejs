<div class="service-card">
  <a href="/service/<%= service._id %>" class="service-card-image">
    <% if (service.images && service.images.length > 0) { %>
      <img src="<%= service.images[0] %>" alt="<%= service.title %>" loading="lazy" />
    <% } else if (service.primaryImage) { %>
      <img src="<%= service.primaryImage %>" alt="<%= service.title %>" loading="lazy" />
    <% } else { %>
      <div class="service-card-placeholder">No Image</div>
    <% } %>
  </a>
  <div class="service-card-content">
    <span class="badge badge-category"><%= service.category %></span>
    <a href="/service/<%= service._id %>" class="service-card-title-link">
      <h3 class="service-card-title"><%= service.title %></h3>
    </a>
    <% if (service.providerId && service.providerId.name) { %>
      <div class="service-card-provider text-small text-muted">By <%= service.providerId.name %></div>
    <% } %>
    <p class="service-card-description"><%= service.description ? service.description.substring(0, 100) : '' %></p>
    <div class="service-card-price">
      <% if (service.pricingType === 'Hourly') { %>
        ₹<%= service.basePrice %>/hour
      <% } else if (service.pricingType === 'Fixed') { %>
        ₹<%= service.basePrice %>
      <% } else if (service.pricingType === 'Package' && service.packages && service.packages.length) { %>
        <%
        // Calculate minimum package price (find cheapest package)
        const minPackagePrice = Math.min(...service.packages.map(p => p.price || 0));
        %>
        From ₹<%= minPackagePrice %>
      <% } %>
    </div>
    <div class="service-card-location text-small">
      <i class="icon-location"></i> <%= service.city %>
      <% if ((service.mode === 'Onsite' || service.mode === 'Hybrid') && service.serviceRadius) { %>
        • <%= service.serviceRadius %> km
      <% } %>
    </div>
    <span class="badge badge-mode"><%= service.mode %></span>
  </div>
  <div class="service-card-footer">
    <% if (service.averageRating > 0) { %>
      <span class="service-card-rating">★ <%= service.averageRating.toFixed(1) %></span>
    <% } %>
    <span class="service-card-views"><i class="icon-eye"></i> <%= service.viewCount %></span>
    <% if (showActions) { %>
      <div class="service-card-actions">
        <a href="/services/<%= service._id %>/edit" class="btn btn-outline btn-sm">Edit</a>
        <button class="btn btn-secondary btn-sm toggle-status-btn" data-id="<%= service._id %>">
          <%= service.isPaused ? 'Activate' : 'Pause' %>
        </button>
        <button class="btn btn-danger btn-sm delete-service-btn" data-id="<%= service._id %>">Delete</button>
      </div>
      <span class="badge <%= service.isPaused ? 'badge-status-paused' : 'badge-status-active' %>">
        <%= service.isPaused ? 'Paused' : 'Active' %>
      </span>
    <% } %>
  </div>
</div>
